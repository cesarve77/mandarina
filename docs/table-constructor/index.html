<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Table Constructor · Mandarina</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="&lt;p&gt;class Table constructor  takes 2 params Schema and TableOptions&lt;/p&gt;
"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Table Constructor · Mandarina"/><meta property="og:type" content="website"/><meta property="og:url" content="https://cesarve77.github.io/mandarinaindex.html"/><meta property="og:description" content="&lt;p&gt;class Table constructor  takes 2 params Schema and TableOptions&lt;/p&gt;
"/><meta property="og:image" content="https://cesarve77.github.io/mandarina/img/docusaurus.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://cesarve77.github.io/mandarina/img/docusaurus.png"/><link rel="shortcut icon" href="/mandarinaimg/favicon.png"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/dracula.min.css"/><link rel="alternate" type="application/atom+xml" href="https://cesarve77.github.io/mandarina/blog/atom.xml" title="Mandarina Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://cesarve77.github.io/mandarina/blog/feed.xml" title="Mandarina Blog RSS Feed"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><link rel="stylesheet" href="/mandarinacss/prism.css"/><link rel="stylesheet" href="/mandarinacss/main.css"/></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/mandarina"><img class="logo" src="/mandarinaimg/docusaurus.svg" alt="Mandarina"/><h2 class="headerTitleWithLogo">Mandarina</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive siteNavItemActive"><a href="/mandarinadocs/table-constructor" target="_self">Docs</a></li><li class=""><a href="/mandarinablog/" target="_self">Blog</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>Table</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Table</h3><ul><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Table</h4><ul><li class="navListItem navListItemActive"><a class="navItem" href="/mandarinadocs/table-constructor">Constructor</a></li><li class="navListItem"><a class="navItem" href="/mandarinadocs/table-static-methods">Static methods</a></li></ul></div><li class="navListItem"><a class="navItem" href="/mandarinadocs/schema">Schema</a></li><li class="navListItem"><a class="navItem" href="/mandarinadocs/validator-creator">Validator Creator</a></li><li class="navListItem"><a class="navItem" href="/mandarinadocs/validators">Validators</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Operations</h3><ul><li class="navListItem"><a class="navItem" href="/mandarinadocs/find-one">Find One</a></li><li class="navListItem"><a class="navItem" href="/mandarinadocs/find">Find</a></li><li class="navListItem"><a class="navItem" href="/mandarinadocs/create">Create</a></li><li class="navListItem"><a class="navItem" href="/mandarinadocs/update">Update</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Auth</h3><ul><li class="navListItem"><a class="navItem" href="/mandarinadocs/auth">Auth</a></li></ul></div></div></section></div><script>
            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              const headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                if (event.target.tagName === 'A') {
                  document.body.classList.remove('tocActive');
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle">Table Constructor</h1></header><article><div><span><p>class Table constructor  takes 2 params Schema and TableOptions</p>
<p><a href="#TableSchema">schema</a></p>
<p><a href="#TableOptions">options</a></p>
<p><em>e.g.</em>:</p>
<pre><code class="hljs css language-typescript jsx"><span class="token keyword">const</span> User<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Table</span><span class="token punctuation">(</span>schema<span class="token punctuation">,</span> options<span class="token punctuation">)</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="1-schema-a-name-tableschema-a"></a><a href="#1-schema-a-name-tableschema-a" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1) schema<a name="TableSchema"></a></h2>
<p><em>where</em>: server &amp;&amp; client</p>
<p><em>type</em>: UserSchemaShape</p>
<pre><code class="hljs css language-typescript"><span class="token keyword">interface</span> <span class="token class-name">UserSchemaShape</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span>fieldName<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token punctuation">:</span>FieldDefinition
<span class="token punctuation">}</span>
</code></pre>
<p><em>description</em>: SchemaShape is a object where each property is a <a href="#fieldName">field name</a> and the value is its fieldDefinition (#fieldDefinition)</p>
<pre><code class="hljs css language-typescript jsx"><span class="token keyword">const</span> schema<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'fieldName'</span><span class="token punctuation">:</span> fieldDefinition<span class="token punctuation">}</span>
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="11-field-name-a-name-fieldname-a-string"></a><a href="#11-field-name-a-name-fieldname-a-string" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1.1) field name<a name="fieldName"></a>: string</h3>
<p><em>where</em>: server &amp;&amp; client</p>
<p><em>type</em>: string</p>
<p><em>description</em>: It is a string compatible with a data base field name, normally must be start with a letter and contains just letters, numbers and few special chars like '-' and '_'</p>
<p><em>e.g.</em>:</p>
<pre><code class="hljs css language-typescript jsx"><span class="token keyword">const</span> User<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Table</span><span class="token punctuation">(</span><span class="token punctuation">{</span>firstName<span class="token punctuation">:</span> fieldDefinition<span class="token punctuation">}</span><span class="token punctuation">,</span> options<span class="token punctuation">)</span>
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="12-fielddefinition-a-name-fielddefinition-a-object"></a><a href="#12-fielddefinition-a-name-fielddefinition-a-object" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1.2 ) fieldDefinition<a name="fieldDefinition"></a>: Object</h3>
<p><em>where</em>: server &amp;&amp; client</p>
<p><em>type</em>: FieldDefinition</p>
<pre><code class="hljs css language-typescript"><span class="token keyword">interface</span> <span class="token class-name">FieldDefinition</span> <span class="token punctuation">{</span>
    <span class="token keyword">type</span><span class="token punctuation">:</span> Native <span class="token operator">|</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">></span> <span class="token operator">|</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span>Native<span class="token operator">></span><span class="token punctuation">,</span>
    label<span class="token punctuation">:</span> Label
    description<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">string</span>
    validators<span class="token punctuation">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span>Validator<span class="token operator">></span>
    defaultValue<span class="token punctuation">:</span> <span class="token builtin">any</span>
    transformValue<span class="token punctuation">:</span> <span class="token punctuation">(</span>value<span class="token punctuation">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token builtin">any</span>
    form<span class="token punctuation">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span>
    list<span class="token punctuation">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span>
    unique<span class="token punctuation">:</span> <span class="token builtin">boolean</span>
    permissions<span class="token operator">?</span><span class="token punctuation">:</span> Permissions
<span class="token punctuation">}</span>

</code></pre>
<p><em>description</em>: It is a object with followings properties</p>
<p><em>e.g.</em>:</p>
<pre><code class="hljs css language-typescript jsx"><span class="token keyword">const</span> User<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Table</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    firstName<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token keyword">type</span><span class="token punctuation">:</span> String<span class="token punctuation">,</span> 
        validators<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token string">'required'</span><span class="token punctuation">]</span>
        <span class="token comment">//... others</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> options<span class="token punctuation">)</span>
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="121-schema-fieldname-type"></a><a href="#121-schema-fieldname-type" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1.2.1)  schema[fieldName].type</h4>
<p><em>where</em>: server &amp;&amp; client</p>
<p><em>type</em>: String | [String] | Number | [Number] | Table.Integer | [Table.Integer] | string | [\string]</p>
<p><em>description</em>: Field type.</p>
<p>Possible values:</p>
<table>
<thead>
<tr><th>value</th><th>description</th></tr>
</thead>
<tbody>
<tr><td>String</td><td>for a string</td></tr>
<tr><td>[String]</td><td>for a array of strings</td></tr>
<tr><td>Number</td><td>for a decimal numbers</td></tr>
<tr><td>[Number]</td><td>for a array of decimal numbers</td></tr>
<tr><td>Table.Integer</td><td>for a integers values</td></tr>
<tr><td>[Table.Integer]</td><td>for a array of integers values</td></tr>
<tr><td>&quot;Table Name&quot;</td><td>for a object, eg. &quot;User&quot;</td></tr>
<tr><td>[&quot;Table Name&quot;]</td><td>for a object,eg. [&quot;User&quot;]</td></tr>
</tbody>
</table>
<p><em>e.g</em></p>
<pre><code class="hljs css language-typescript jsx"><span class="token keyword">const</span> User<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Table</span><span class="token punctuation">(</span><span class="token punctuation">{</span>firstName<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token keyword">type</span><span class="token punctuation">:</span> String<span class="token punctuation">}</span><span class="token punctuation">,</span> tags<span class="token punctuation">:</span> <span class="token punctuation">[</span>String<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span> options<span class="token punctuation">)</span>
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="122-schema-fieldname-validators"></a><a href="#122-schema-fieldname-validators" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1.2.2)  schema[fieldName].validators</h4>
<p><em>where</em>: server &amp;&amp; client</p>
<p><em>type</em>: Validator[]</p>
<pre><code class="hljs css language-typescript jsx"><span class="token keyword">interface</span> <span class="token class-name">Validator</span> <span class="token punctuation">{</span>
    validatorName<span class="token punctuation">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> undefined
    param<span class="token punctuation">:</span> <span class="token builtin">any</span>

    <span class="token keyword">new</span><span class="token punctuation">(</span><span class="token punctuation">{</span>key<span class="token punctuation">,</span> definition<span class="token punctuation">,</span> path<span class="token punctuation">,</span> value<span class="token punctuation">}</span><span class="token punctuation">:</span> ValidatorParams<span class="token punctuation">)</span><span class="token punctuation">:</span> ValidatorInterface
<span class="token punctuation">}</span>
</code></pre>
<p><em>description</em>: Here you can find a list of preconfigure <a href="/mandarinadocs/validators">validators</a></p>
<p>a Validator can be a string or a object</p>
<ul>
<li>String with the name of the constraint (for validations which doesn't needs any params like 'required')</li>
</ul>
<p><em>e.g.</em>:</p>
<pre><code class="hljs css language-typescript jsx"><span class="token keyword">const</span> User<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Table</span><span class="token punctuation">(</span><span class="token punctuation">{</span>firstName<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token keyword">type</span><span class="token punctuation">:</span> String<span class="token punctuation">,</span> validators<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'required'</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span> options<span class="token punctuation">)</span>
</code></pre>
<ul>
<li>Object with one key as name of the constraint and any param as value.</li>
</ul>
<p><em>e.g.</em>:</p>
<pre><code class="hljs css language-typescript jsx"><span class="token keyword">const</span> User<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Table</span><span class="token punctuation">(</span><span class="token punctuation">{</span>age<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token keyword">type</span><span class="token punctuation">:</span> String<span class="token punctuation">,</span> validators<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>minValue<span class="token punctuation">:</span> <span class="token number">18</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>maxValue<span class="token punctuation">:</span> <span class="token number">45</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span> options<span class="token punctuation">)</span>
</code></pre>
<ul>
<li><a href="validators-creator.md">A Custom validator</a>.</li>
</ul>
<p>You can create a register your custom validators. See <a href="validators-creator.md">A Custom validator</a>.</p>
<h4><a class="anchor" aria-hidden="true" id="123-schema-fieldname-label"></a><a href="#123-schema-fieldname-label" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1.2.3)  schema[fieldName].label</h4>
<p><em>where</em>: client</p>
<p><em>type</em>:  string | (definition: UserFieldDefinition) =&gt; string | &quot;&quot;</p>
<p><em>description</em>: The field label in the form and/or the column header in a table. Or a function to return a string, use &quot;&quot; for avoid the label</p>
<p><em>default</em>: If it not defined the label will be take it humanizing the field name</p>
<p><em>e.g.</em>:</p>
<pre><code class="hljs css language-typescript jsx"><span class="token keyword">const</span> User<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Table</span><span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token keyword">type</span><span class="token punctuation">:</span> String<span class="token punctuation">,</span> label<span class="token punctuation">:</span> <span class="token string">'Full name'</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span> options<span class="token punctuation">)</span>
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="124-schema-fieldname-description"></a><a href="#124-schema-fieldname-description" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1.2.4)  schema[fieldName].description</h4>
<p><em>where</em>: client</p>
<p><em>type</em>: string</p>
<p><em>description</em>: More detail about the field, it will be displayed when mouse over the form label/table header.</p>
<p><em>e.g.</em>:</p>
<pre><code class="hljs css language-typescript jsx"><span class="token keyword">const</span> User<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Table</span><span class="token punctuation">(</span><span class="token punctuation">{</span>address<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token keyword">type</span><span class="token punctuation">:</span> String<span class="token punctuation">,</span> label<span class="token punctuation">:</span> <span class="token string">'Your postal address for the delivery'</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span> options<span class="token punctuation">)</span>
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="125-schema-fieldname-defaultvalue"></a><a href="#125-schema-fieldname-defaultvalue" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1.2.5)  schema[fieldName].defaultValue</h4>
<p><em>where</em>: client</p>
<p><em>type</em>: any | ()=&gt;any</p>
<p><em>description</em>: Default value in form when nothing is provided, can be a function returning any value.</p>
<p><em>e.g.</em>:</p>
<pre><code class="hljs css language-typescript jsx"><span class="token keyword">const</span> User<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Table</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token keyword">from</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token keyword">type</span><span class="token punctuation">:</span> Date<span class="token punctuation">,</span> defaultValue<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span> options<span class="token punctuation">)</span>
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="126-schema-fieldname-form"></a><a href="#126-schema-fieldname-form" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1.2.6)  schema[fieldName].form</h4>
<p><em>where</em>: client</p>
<p><em>type</em>: {component: JSX.ElementClass, [props: string]: any}</p>
<p><em>description</em>: Here you can specify how to render the field in the form. see //TODO</p>
<p><em>e.g.</em>:</p>
<pre><code class="hljs css language-typescript jsx"><span class="token keyword">const</span> User<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Table</span><span class="token punctuation">(</span><span class="token punctuation">{</span>description<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token keyword">type</span><span class="token punctuation">:</span> String<span class="token punctuation">,</span> form<span class="token punctuation">:</span> <span class="token punctuation">{</span>component<span class="token punctuation">:</span> LongTextField<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span> options<span class="token punctuation">)</span>
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="127-schema-fieldname-list"></a><a href="#127-schema-fieldname-list" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1.2.7)  schema[fieldName].list</h4>
<p><em>where</em>: client</p>
<p><em>type</em>: {[props: string]: any}</p>
<p><em>description</em>: Here you can specify how to render the field in the list. see //TODO</p>
<h4><a class="anchor" aria-hidden="true" id="128-schema-fieldname-unique"></a><a href="#128-schema-fieldname-unique" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1.2.8)  schema[fieldName].unique</h4>
<p><em>where</em>: server</p>
<p><em>type</em>: boolean</p>
<p><em>description</em>: It indicate if the field inm the data base should be unique</p>
<p><em>default</em>: false</p>
<p><em>e.g.</em>:</p>
<pre><code class="hljs css language-typescript jsx"><span class="token keyword">const</span> User<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Table</span><span class="token punctuation">(</span><span class="token punctuation">{</span>email<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token keyword">type</span><span class="token punctuation">:</span> String<span class="token punctuation">,</span> unique<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token keyword">type</span><span class="token punctuation">:</span> String<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span> options<span class="token punctuation">)</span>
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="129-schema-fieldname-virtual"></a><a href="#129-schema-fieldname-virtual" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1.2.9)  schema[fieldName].virtual:</h4>
<p><em>where</em>: client</p>
<p><em>type</em>: boolean</p>
<p><em>description</em>: Set it to true if this field should not be in the table just in forms or table, eg. for a password confirmation field or a total field in a table (in this case is not possible order or search for this virtual field). It does not work when the <a href="#virtualTable">table is virtual</a> (in this case all field are virtual)</p>
<p><em>default</em>: false</p>
<p><em>e.g.</em>:</p>
<pre><code class="hljs css language-typescript jsx"><span class="token keyword">const</span> User<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Table</span><span class="token punctuation">(</span><span class="token punctuation">{</span>repeatPassword<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token keyword">type</span><span class="token punctuation">:</span> String<span class="token punctuation">,</span> virtual<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> form<span class="token punctuation">:</span> <span class="token punctuation">{</span>component<span class="token punctuation">:</span> TextField<span class="token punctuation">,</span> <span class="token keyword">type</span><span class="token punctuation">:</span> <span class="token string">'password'</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span> options<span class="token punctuation">)</span>
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="1210-schema-fieldname-permissions-object-a-name-fieldpermissions-a"></a><a href="#1210-schema-fieldname-permissions-object-a-name-fieldpermissions-a" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1.2.10)  schema[fieldName].permissions: Object <a name="fieldPermissions"></a></h4>
<p><em>where</em>: server &amp;&amp; client</p>
<p><em>type</em>: Permissions</p>
<pre><code class="hljs css language-typescript"><span class="token keyword">interface</span> <span class="token class-name">Permissions</span> <span class="token punctuation">{</span>
    read<span class="token operator">?</span><span class="token punctuation">:</span>  <span class="token string">'everyone'</span> <span class="token operator">|</span> <span class="token string">'nobody'</span> <span class="token operator">|</span> <span class="token builtin">string</span>
    create<span class="token operator">?</span><span class="token punctuation">:</span>  <span class="token string">'everyone'</span> <span class="token operator">|</span> <span class="token string">'nobody'</span> <span class="token operator">|</span> <span class="token builtin">string</span>
    update<span class="token operator">?</span><span class="token punctuation">:</span>  <span class="token string">'everyone'</span> <span class="token operator">|</span> <span class="token string">'nobody'</span> <span class="token operator">|</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>
</code></pre>
<p><em>description</em>: Create, read and update Permission for each individual field.</p>
<p>There are to reserved roles 'everyone' | 'nobody' any other string will be take as a role. Any user with this role is allowed to read/create/update the field.</p>
<ul>
<li>'everyone' give all permission to every user or guest</li>
<li>'nobody' deny all permission to every user and should be use alone, (not in combination of other role)</li>
</ul>
<p><em>default</em>:  If it not defined permission will be inherited from the table permissions</p>
<p><em>e.g.</em>:</p>
<pre><code class="hljs css language-typescript jsx"><span class="token keyword">const</span> User<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Table</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    userName<span class="token punctuation">:</span><span class="token punctuation">{</span>
        <span class="token keyword">type</span><span class="token punctuation">:</span> String<span class="token punctuation">,</span>
        permissions<span class="token punctuation">:</span><span class="token punctuation">{</span>
            create<span class="token punctuation">:</span> <span class="token string">'admin'</span><span class="token punctuation">,</span>
            read<span class="token punctuation">:</span> <span class="token string">'everybody'</span><span class="token punctuation">,</span>
            update<span class="token punctuation">:</span> <span class="token string">'nobody'</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    email<span class="token punctuation">:</span><span class="token punctuation">{</span>
        permissions<span class="token punctuation">:</span><span class="token punctuation">{</span>
            create<span class="token punctuation">:</span> <span class="token string">'admin'</span><span class="token punctuation">,</span>
            read<span class="token punctuation">:</span> <span class="token string">'admin|staff'</span><span class="token punctuation">,</span>
            update<span class="token punctuation">:</span> <span class="token string">'nobody'</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>options<span class="token punctuation">)</span>
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="12101-schema-fieldname-permissionsread"></a><a href="#12101-schema-fieldname-permissionsread" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1.2.10.1)  schema[fieldName].permissions.read</h4>
<p><em>where</em>: server &amp;&amp; client</p>
<p><em>type</em>: 'everyone' | 'nobody' | string</p>
<p><em>description</em>: roles separated by '|' which it is guaranteed reading permission for the field</p>
<h4><a class="anchor" aria-hidden="true" id="12102-schema-fieldname-permissionscreate"></a><a href="#12102-schema-fieldname-permissionscreate" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1.2.10.2)  schema[fieldName].permissions.create</h4>
<p><em>where</em>: server &amp;&amp; client</p>
<p><em>type</em>: 'everyone' | 'nobody' | string</p>
<p><em>description</em>:  roles separated by '|' which it is guaranteed creating permission for the field</p>
<h4><a class="anchor" aria-hidden="true" id="12103-schema-fieldname-permissionsupdate"></a><a href="#12103-schema-fieldname-permissionsupdate" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1.2.10.3)  schema[fieldName].permissions.update</h4>
<p><em>where</em>: server &amp;&amp; client</p>
<p><em>type</em>: 'everyone' | 'nobody' | string</p>
<p><em>description</em>:  roles separated by '|' which it is guaranteed updating permission for the field</p>
<h2><a class="anchor" aria-hidden="true" id="2-options-a-name-tableoptions-a"></a><a href="#2-options-a-name-tableoptions-a" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2) Options<a name="TableOptions"></a></h2>
<p><em>where</em>: server &amp;&amp; client</p>
<p><em>type</em>: TableOptions</p>
<pre><code class="hljs css language-typescript"><span class="token keyword">interface</span> <span class="token class-name">TableSchemaOptions</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token builtin">string</span>
    virtual<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">boolean</span>
    forceType<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">boolean</span>
    filterExtraKeys<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">boolean</span>
    recursive<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
    errorFromServerMapper<span class="token operator">?</span><span class="token punctuation">:</span> ErrorFromServerMapper
    permissions<span class="token operator">?</span><span class="token punctuation">:</span> Permissions
    virtual<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">boolean</span>
    onBefore<span class="token operator">?</span><span class="token punctuation">:</span> Hook
    onAfter<span class="token operator">?</span><span class="token punctuation">:</span> Hook
    resolvers<span class="token operator">?</span><span class="token punctuation">:</span> ResolversInterface
<span class="token punctuation">}</span> 
</code></pre>
<p><em>description</em>: It define the Table behavior</p>
<p><em>e.g.:</em></p>
<pre><code class="hljs css language-typescript jsx"><span class="token keyword">import</span> <span class="token punctuation">{</span>Table<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'mandarina'</span>

<span class="token keyword">const</span> User<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Table</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token keyword">type</span><span class="token punctuation">:</span> String<span class="token punctuation">}</span><span class="token punctuation">,</span>
    surname<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token keyword">type</span><span class="token punctuation">:</span><span class="token builtin">string</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    email<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token keyword">type</span><span class="token punctuation">:</span><span class="token builtin">string</span><span class="token punctuation">,</span> unique<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> validators<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token string">'isEmail'</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">'User'</span><span class="token punctuation">,</span>
    virtual<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    forceType<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    filterExtraKeys<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    errorFromServerMapper<span class="token punctuation">:</span> <span class="token punctuation">(</span>field<span class="token punctuation">,</span> error<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>field <span class="token operator">===</span> <span class="token string">'email'</span> <span class="token operator">&amp;&amp;</span> error <span class="token operator">&amp;&amp;</span> error<span class="token punctuation">.</span>message <span class="token operator">&amp;&amp;</span> error<span class="token punctuation">.</span>message <span class="token operator">===</span> <span class="token string">'GraphQL error: A unique constraint would be violated on Template. Details: Field name = template'</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token string">'Template ID already exists'</span>
        <span class="token keyword">return</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    permissions<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        read<span class="token punctuation">:</span> <span class="token string">'admin|staff'</span><span class="token punctuation">,</span>
        create <span class="token punctuation">:</span> <span class="token string">'everybody'</span><span class="token punctuation">,</span>
        update<span class="token punctuation">:</span> <span class="token string">'user'</span><span class="token punctuation">,</span>
        <span class="token keyword">delete</span><span class="token punctuation">:</span> <span class="token string">'admin|user'</span><span class="token punctuation">,</span>
        filter<span class="token punctuation">:</span> <span class="token punctuation">(</span>user<span class="token punctuation">,</span> <span class="token punctuation">{</span>action<span class="token punctuation">,</span>id<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span><span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>action<span class="token operator">===</span><span class="token string">'Update'</span> <span class="token operator">&amp;&amp;</span> user<span class="token punctuation">.</span>roles<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'user'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// if a user try to update a user we limit the action only to their own user </span>
                <span class="token keyword">return</span> <span class="token punctuation">{</span>id<span class="token punctuation">:</span> user<span class="token punctuation">.</span>id<span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    onBefore<span class="token punctuation">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>action<span class="token punctuation">,</span> _<span class="token punctuation">,</span> <span class="token punctuation">{</span>data<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>prisma<span class="token punctuation">}</span><span class="token punctuation">,</span> info<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>action<span class="token operator">===</span><span class="token string">'create'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> exist <span class="token operator">=</span> <span class="token keyword">await</span> prisma<span class="token punctuation">.</span>exists<span class="token punctuation">.</span><span class="token function">User</span><span class="token punctuation">(</span><span class="token punctuation">{</span>email<span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>exist<span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'Email already exist!'</span><span class="token punctuation">)</span> <span class="token comment">// it is not really necessary because we are marking email field as unique, and we are using errorFromServerMapper for a show friendly error</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    onAfter<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token keyword">type</span><span class="token punctuation">,</span> action<span class="token punctuation">,</span> _<span class="token punctuation">,</span> data<span class="token punctuation">,</span> <span class="token punctuation">{</span>prisma<span class="token punctuation">,</span> result<span class="token punctuation">}</span><span class="token punctuation">,</span> info<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token function">sendWelcomeEmail</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>email<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    resolvers<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        signIn<span class="token punctuation">:</span> <span class="token punctuation">{</span>
            resolver<span class="token punctuation">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>_<span class="token punctuation">,</span> data<span class="token punctuation">,</span> <span class="token punctuation">{</span>prisma<span class="token punctuation">,</span> request<span class="token punctuation">}</span><span class="token punctuation">,</span> info<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
               <span class="token comment">//normally this is used with virtual tables, but here you can create your custom resolvers</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token keyword">type</span><span class="token punctuation">:</span> <span class="token string">"mutation"</span><span class="token punctuation">,</span>
            result<span class="token punctuation">:</span> <span class="token string">"String!"</span><span class="token punctuation">,</span>
         <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre>
<h3><a class="anchor" aria-hidden="true" id="21-optionsname"></a><a href="#21-optionsname" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2.1) options.name</h3>
<p><em>where</em>: server &amp;&amp; client</p>
<p><em>type</em>: string</p>
<p><em>description</em>: a unique table name.</p>
<p><em>e.g.</em></p>
<pre><code class="hljs css language-typescript jsx"><span class="token keyword">const</span> User<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Table</span><span class="token punctuation">(</span>schema<span class="token punctuation">,</span><span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">'User'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>   
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="22-optionsvirtual"></a><a href="#22-optionsvirtual" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2.2) options.virtual</h3>
<p><em>where</em>: server &amp;&amp; client</p>
<p><em>type</em>: boolean</p>
<p><em>description</em>: set to true for avoid create a table in the data base. Works for create form, use it together with resolvers to create custom forms that perform a action in the server.</p>
<p><em>default</em>: false</p>
<p><em>e.g.</em></p>
<pre><code class="hljs css language-typescript jsx"><span class="token keyword">const</span> User<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Table</span><span class="token punctuation">(</span>schema<span class="token punctuation">,</span><span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">'User'</span><span class="token punctuation">,</span>
    virtual<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>   
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="23-optionsforcetype"></a><a href="#23-optionsforcetype" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2.3) options.forceType</h3>
<p><em>where</em>: server &amp;&amp; client</p>
<p><em>type</em>: boolean</p>
<p><em>description</em>: always that is possible it force the result of the form to field type.
It more for internal use, don't change it</p>
<p><em>default</em>: true</p>
<p><em>e.g.</em></p>
<pre><code class="hljs css language-typescript jsx"><span class="token keyword">const</span> User<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Table</span><span class="token punctuation">(</span>schema<span class="token punctuation">,</span><span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">'User'</span><span class="token punctuation">,</span>
    forceType<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>   
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="24-optionsfilterextrakeys"></a><a href="#24-optionsfilterextrakeys" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2.4) options.filterExtraKeys</h3>
<p><em>where</em>: server &amp;&amp; client</p>
<p><em>type</em>: boolean</p>
<p><em>description</em>: when clear a model it remove all properties no present in the schema.
It more for internal use, change it if you know what are you doing</p>
<p><em>default</em>: true</p>
<p><em>e.g.</em></p>
<pre><code class="hljs css language-typescript jsx"><span class="token keyword">const</span> User<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Table</span><span class="token punctuation">(</span>schema<span class="token punctuation">,</span><span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">'User'</span><span class="token punctuation">,</span>
    filterExtraKeys<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>   
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="25-optionsrecursive"></a><a href="#25-optionsrecursive" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2.5) options.recursive</h3>
<p><em>where</em>: server &amp;&amp; client</p>
<p><em>type</em>: string[]</p>
<p><em>description</em>: Is normal that a Table have children which have the parent as a child. e.g.</p>
<pre><code class="hljs css language-graphql">type User{
    name: string!
    posts: [Post!]!
}<span class="hljs-built_in">
type </span>Post{
    author:<span class="hljs-built_in"> User
</span>    text: String!
}
</code></pre>
<p>In this case the Table will stop the validate model at user.post.user (when find the parent in a descendant)
If you need to continue validating you need to add the path &quot;post.user &quot; in the array</p>
<p><em>default</em>: []</p>
<p><em>e.g.</em></p>
<pre><code class="hljs css language-typescript jsx"><span class="token keyword">const</span> Post<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Table</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    author<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token keyword">type</span><span class="token punctuation">:</span> <span class="token string">'User'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    text<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token keyword">type</span><span class="token punctuation">:</span> String<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">'User'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>   
<span class="token keyword">const</span> User<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Table</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> String<span class="token punctuation">,</span>
    validators<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'required'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    posts<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'Post'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">'User'</span><span class="token punctuation">,</span>
    recursive<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"post.user"</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>   
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="26-optionserrorfromservermapper"></a><a href="#26-optionserrorfromservermapper" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2.6) options.errorFromServerMapper</h3>
<p><em>where</em>: client</p>
<p><em>type</em>:  (field: string, error: any) =&gt; string | undefined</p>
<p><em>description</em>:</p>
<p><em>e.g.</em></p>
<pre><code class="hljs css language-typescript jsx"><span class="token keyword">const</span> User<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Table</span><span class="token punctuation">(</span>schema<span class="token punctuation">,</span><span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">'User'</span><span class="token punctuation">,</span>
    errorFromServerMapper<span class="token punctuation">:</span> <span class="token punctuation">(</span>field<span class="token punctuation">,</span> error<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>field <span class="token operator">===</span> <span class="token string">'email'</span> <span class="token operator">&amp;&amp;</span> error <span class="token operator">&amp;&amp;</span> error<span class="token punctuation">.</span>message <span class="token operator">&amp;&amp;</span> error<span class="token punctuation">.</span>message <span class="token operator">===</span> <span class="token string">'GraphQL error: A unique constraint would be violated on User. Details: Field name = email'</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token string">'Email already exists'</span>
        <span class="token keyword">return</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>   
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="27-optionspermissions"></a><a href="#27-optionspermissions" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2.7) options.permissions</h3>
<p><em>where</em>: server &amp;&amp; client</p>
<p><em>type</em>: Permissions</p>
<pre><code class="hljs css language-typescript"><span class="token keyword">interface</span> <span class="token class-name">Permissions</span> <span class="token punctuation">{</span>
    read<span class="token operator">?</span><span class="token punctuation">:</span>  <span class="token string">'everyone'</span> <span class="token operator">|</span> <span class="token string">'nobody'</span> <span class="token operator">|</span> <span class="token builtin">string</span>
    create<span class="token operator">?</span><span class="token punctuation">:</span>  <span class="token string">'everyone'</span> <span class="token operator">|</span> <span class="token string">'nobody'</span> <span class="token operator">|</span> <span class="token builtin">string</span>
    update<span class="token operator">?</span><span class="token punctuation">:</span>  <span class="token string">'everyone'</span> <span class="token operator">|</span> <span class="token string">'nobody'</span> <span class="token operator">|</span> <span class="token builtin">string</span>
    <span class="token keyword">delete</span><span class="token operator">?</span><span class="token punctuation">:</span>  <span class="token string">'everyone'</span> <span class="token operator">|</span> <span class="token string">'nobody'</span> <span class="token operator">|</span> <span class="token builtin">string</span>
    filter<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> user<span class="token punctuation">:</span> <span class="token punctuation">{</span> userId<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> roles<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> args<span class="token punctuation">:</span> <span class="token punctuation">{</span>action<span class="token punctuation">:</span>  <span class="token string">'create'</span> <span class="token operator">|</span> <span class="token string">'read'</span> <span class="token operator">|</span> <span class="token string">'update'</span> <span class="token operator">|</span> <span class="token string">'delete'</span> <span class="token punctuation">,</span> id<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> Promise<span class="token operator">&lt;</span>Object<span class="token operator">></span> <span class="token operator">|</span> Object <span class="token operator">|</span> undefined
<span class="token punctuation">}</span>
</code></pre>
<p><em>description</em>:  It set de default permission for the table fields. see <a href="#fieldPermissions">field permissions</a></p>
<p><em>e.g.</em>:</p>
<pre><code class="hljs css language-typescript jsx"><span class="token keyword">const</span> User<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Table</span><span class="token punctuation">(</span>schema<span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        name<span class="token punctuation">:</span> <span class="token string">'User'</span><span class="token punctuation">,</span>
        permissions<span class="token punctuation">:</span><span class="token punctuation">{</span>
            create<span class="token punctuation">:</span> <span class="token string">'everybody'</span><span class="token punctuation">,</span>
            read<span class="token punctuation">:</span> <span class="token string">'everybody'</span><span class="token punctuation">,</span>
            update<span class="token punctuation">:</span> <span class="token string">'user|admin'</span><span class="token punctuation">,</span>
            <span class="token keyword">delete</span><span class="token punctuation">:</span> <span class="token string">'admin'</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="271-optionspermissionsread"></a><a href="#271-optionspermissionsread" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2.7.1)  options.permissions.read</h4>
<p><em>where</em>: server &amp;&amp; client</p>
<p><em>type</em>: 'everyone' | 'nobody' | string</p>
<p><em>description</em>: roles separated by '|' which it is guaranteed reading permission for the field</p>
<h4><a class="anchor" aria-hidden="true" id="273-optionspermissionscreate"></a><a href="#273-optionspermissionscreate" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2.7.3)  options.permissions.create</h4>
<p><em>where</em>: server &amp;&amp; client</p>
<p><em>type</em>: 'everyone' | 'nobody' | string</p>
<p><em>description</em>:  roles separated by '|' which it is guaranteed creating permission for the field</p>
<h4><a class="anchor" aria-hidden="true" id="274-optionspermissionsupdate"></a><a href="#274-optionspermissionsupdate" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2.7.4) options.permissions.update</h4>
<p><em>where</em>: server &amp;&amp; client</p>
<p><em>type</em>: 'everyone' | 'nobody' | string</p>
<p><em>description</em>:  roles separated by '|' which it is guaranteed updating permission for the field</p>
<h4><a class="anchor" aria-hidden="true" id="274-optionspermissionsupdate-1"></a><a href="#274-optionspermissionsupdate-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2.7.4) options.permissions.update</h4>
<p><em>where</em>: server &amp;&amp; client</p>
<p><em>type</em>: 'everyone' | 'nobody' | string</p>
<p><em>description</em>:  roles separated by '|' which it is guaranteed updating permission for the field</p>
<h3><a class="anchor" aria-hidden="true" id="28-optionsonbefore"></a><a href="#28-optionsonbefore" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2.8) options.onBefore</h3>
<p><em>where</em>: server</p>
<p><em>type</em>: (action: 'create' | 'read' | 'update' | 'delete', root: any, args: any, context: any, info: any): Promise<any> | void | any</p>
<p><em>description</em>: It function will be execute before performance any action into the table.</p>
<p>It takes 5 params</p>
<ul>
<li>action: the action being executing in the table. One of this 'create' | 'read' | 'update' | 'delete'</li>
<li>root: the root param in the graphQL resolver</li>
<li>args: the args param in the graphQL resolver, for us will be the form model</li>
<li>context: the context attached in the graphQL server, normally the user and prisma at least.</li>
<li>info: AST in the graphQL resolver, we can used together with prisma to fetch only the fields asked for the client. See <a href="https://www.prisma.io/docs/prisma-graphql-api/prisma-bindings/prisma-bindings-prb1/#schema-delegation-using-the-info-object">Schema delegation using the info object</a></li>
</ul>
<p>It can return a Promise and it be resolved before execute any action in to the table.</p>
<p>If the promise is rejected a error will throw and the action will stop</p>
<p><em>e.g.</em></p>
<pre><code class="hljs css language-typescript jsx"><span class="token keyword">const</span> User<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Table</span><span class="token punctuation">(</span>schema<span class="token punctuation">,</span><span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">'User'</span><span class="token punctuation">,</span>
    onBefore<span class="token punctuation">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>action<span class="token punctuation">,</span> _<span class="token punctuation">,</span> <span class="token punctuation">{</span>data<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>prisma<span class="token punctuation">}</span><span class="token punctuation">,</span> info<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>action<span class="token operator">===</span><span class="token string">'create'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> exist <span class="token operator">=</span> <span class="token keyword">await</span> prisma<span class="token punctuation">.</span>exists<span class="token punctuation">.</span><span class="token function">User</span><span class="token punctuation">(</span><span class="token punctuation">{</span>email<span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>exist<span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'Email already exist!'</span><span class="token punctuation">)</span> <span class="token comment">// it is not really necessary because we are marking email field as unique, and we are using errorFromServerMapper for a show friendly error</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>   
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="29-optionsonafter"></a><a href="#29-optionsonafter" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2.9) options.onAfter</h3>
<p><em>where</em>: server</p>
<p><em>type</em>: (action: 'create' | 'read' | 'update' | 'delete', root: any, args: any, context: any, info: any): void</p>
<p><em>description</em>: It function will be execute after the action into the table.</p>
<p>It takes 5 params</p>
<ul>
<li>action: the action being executing in the table. One of this 'create' | 'read' | 'update' | 'delete'</li>
<li>root: the root param in the graphQL resolver</li>
<li>args: the args param in the graphQL resolver, for us will be the form model</li>
<li>context: the context attached in the graphQL server now with a extra property &quot;result&quot; which contain the new object create or modified in the action, or the old object for deletion.</li>
<li>info: AST in the graphQL resolver, we can used together with prisma to fetch only the fields asked for the client. See <a href="https://www.prisma.io/docs/prisma-graphql-api/prisma-bindings/prisma-bindings-prb1/#schema-delegation-using-the-info-object">Schema delegation using the info object</a></li>
</ul>
<p>It can return a Promise and it be resolved before execute any action in to the table.</p>
<p>If the promise is rejected a error will throw and the action will stop</p>
<p><em>e.g.</em></p>
<pre><code class="hljs css language-typescript jsx"><span class="token keyword">const</span> User<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Table</span><span class="token punctuation">(</span>schema<span class="token punctuation">,</span><span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">'User'</span><span class="token punctuation">,</span>
    onAfter<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token keyword">type</span><span class="token punctuation">,</span> action<span class="token punctuation">,</span> _<span class="token punctuation">,</span> data<span class="token punctuation">,</span> <span class="token punctuation">{</span>prisma<span class="token punctuation">,</span> result<span class="token punctuation">}</span><span class="token punctuation">,</span> info<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
       <span class="token function">sendWelcomeEmail</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>email<span class="token punctuation">)</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="210-optionsresolvers"></a><a href="#210-optionsresolvers" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2.10) options.resolvers</h3>
<p><em>type</em>: ResolversInterface</p>
<pre><code class="hljs css language-typescript"><span class="token keyword">interface</span> <span class="token class-name">ResolversInterface</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span>name<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
        resolver<span class="token punctuation">:</span> <span class="token punctuation">(</span>_<span class="token punctuation">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> args<span class="token punctuation">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> context<span class="token punctuation">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> info<span class="token punctuation">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token builtin">any</span> <span class="token operator">|</span> Promise<span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token operator">></span>
        <span class="token keyword">type</span><span class="token punctuation">:</span> <span class="token string">"mutation"</span> <span class="token operator">|</span> <span class="token string">"query"</span>
        result<span class="token punctuation">:</span> <span class="token builtin">string</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p><em>description</em>: //TODO</p>
<p><em>e.g.</em></p>
<pre><code class="hljs css language-typescript jsx"><span class="token keyword">const</span> User<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Table</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token keyword">type</span><span class="token punctuation">:</span> String<span class="token punctuation">}</span><span class="token punctuation">,</span>
    password<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token keyword">type</span><span class="token punctuation">:</span><span class="token builtin">string</span><span class="token punctuation">,</span> form<span class="token punctuation">:</span><span class="token punctuation">{</span><span class="token keyword">type</span><span class="token punctuation">:</span><span class="token string">'password'</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">'User'</span><span class="token punctuation">,</span>
    virtual<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    resolvers<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        signIn<span class="token punctuation">:</span> <span class="token punctuation">{</span>
            resolver<span class="token punctuation">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>_<span class="token punctuation">,</span> data<span class="token punctuation">,</span> <span class="token punctuation">{</span>prisma<span class="token punctuation">,</span> request<span class="token punctuation">}</span><span class="token punctuation">,</span> info<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
                <span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token keyword">await</span> prisma<span class="token punctuation">.</span>query<span class="token punctuation">.</span><span class="token function">user</span><span class="token punctuation">(</span><span class="token punctuation">{</span>where<span class="token punctuation">:</span> <span class="token punctuation">{</span>email<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">'{id,email,roles,hash}'</span><span class="token punctuation">)</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>user<span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'Email not found'</span><span class="token punctuation">)</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>user<span class="token punctuation">.</span>hash<span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'No Password set'</span><span class="token punctuation">)</span>
                <span class="token keyword">const</span> bcrypt <span class="token operator">=</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">'bcrypt'</span><span class="token punctuation">)</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>bcrypt<span class="token punctuation">.</span><span class="token function">compareSync</span><span class="token punctuation">(</span>password<span class="token punctuation">,</span> user<span class="token punctuation">.</span>hash<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'Wrong password'</span><span class="token punctuation">)</span>
                <span class="token keyword">const</span> jwt <span class="token operator">=</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">'jsonwebtoken'</span><span class="token punctuation">)</span>
                <span class="token keyword">return</span> jwt<span class="token punctuation">.</span><span class="token function">sign</span><span class="token punctuation">(</span>user<span class="token punctuation">,</span> privateKey<span class="token punctuation">,</span> <span class="token punctuation">{</span>algorithm<span class="token punctuation">:</span> <span class="token string">"RS256"</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token keyword">type</span><span class="token punctuation">:</span> <span class="token string">"mutation"</span><span class="token punctuation">,</span>
            result<span class="token punctuation">:</span> <span class="token string">"String!"</span><span class="token punctuation">,</span>
         <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
</span></div></article></div><div class="docs-prevnext"><a class="docs-next button" href="/mandarinadocs/table-static-methods"><span>Table - Static methods</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#1-schema-a-name-tableschema-a">1) schema</a><ul class="toc-headings"><li><a href="#11-field-name-a-name-fieldname-a-string">1.1) field name: string</a></li><li><a href="#12-fielddefinition-a-name-fielddefinition-a-object">1.2 ) fieldDefinition: Object</a></li></ul></li><li><a href="#2-options-a-name-tableoptions-a">2) Options</a><ul class="toc-headings"><li><a href="#21-optionsname">2.1) options.name</a></li><li><a href="#22-optionsvirtual">2.2) options.virtual</a></li><li><a href="#23-optionsforcetype">2.3) options.forceType</a></li><li><a href="#24-optionsfilterextrakeys">2.4) options.filterExtraKeys</a></li><li><a href="#25-optionsrecursive">2.5) options.recursive</a></li><li><a href="#26-optionserrorfromservermapper">2.6) options.errorFromServerMapper</a></li><li><a href="#27-optionspermissions">2.7) options.permissions</a></li><li><a href="#28-optionsonbefore">2.8) options.onBefore</a></li><li><a href="#29-optionsonafter">2.9) options.onAfter</a></li><li><a href="#210-optionsresolvers">2.10) options.resolvers</a></li></ul></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/mandarina" class="nav-home"><img src="/mandarinaimg/docusaurus.svg" alt="Mandarina" width="66" height="58"/></a><div><h5>Docs</h5><a href="/mandarinadocs/en/doc1.html">Getting Started (or other categories)</a><a href="/mandarinadocs/en/doc2.html">Guides (or other categories)</a><a href="/mandarinadocs/en/doc3.html">API Reference (or other categories)</a></div><div><h5>Community</h5><a href="/mandarinaen/users.html">User Showcase</a><a href="http://stackoverflow.com/questions/tagged/" target="_blank" rel="noreferrer noopener">Stack Overflow</a><a href="https://discordapp.com/">Project Chat</a><a href="https://twitter.com/" target="_blank" rel="noreferrer noopener">Twitter</a></div><div><h5>More</h5><a href="/mandarinablog">Blog</a><a href="https://github.com/">GitHub</a><a class="github-button" data-icon="octicon-star" data-count-href="/facebook/docusaurus/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><a href="https://code.facebook.com/projects/" target="_blank" rel="noreferrer noopener" class="fbOpenSource"><img src="/mandarinaimg/oss_logo.png" alt="Facebook Open Source" width="170" height="45"/></a><section class="copyright">Copyright © 2018 Cesar Ramos</section></footer></div></body></html>